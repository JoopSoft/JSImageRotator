/*!-----------------------------------------------------------------------------
 * Vegas - Fullscreen Backgrounds and Slideshows.
 * v2.2.0 - built 2016-01-18
 * Licensed under the MIT License.
 * http://vegas.jaysalvat.com/
 * ----------------------------------------------------------------------------
 * Copyright (C) 2010-2016 Jay Salvat
 * http://jaysalvat.com/
 * --------------------------------------------------------------------------*/
(function(n){"use strict";var t={slide:0,delay:5e3,preload:!1,preloadImage:!1,preloadVideo:!1,timer:!0,overlay:!1,autoplay:!0,shuffle:!1,cover:!0,color:null,align:"center",valign:"center",transition:"fade",transitionDuration:1e3,transitionRegister:[],animation:null,animationDuration:"auto",animationRegister:[],init:function(){},play:function(){},pause:function(){},walk:function(){},slides:[]},i={},r=function(i,r){this.elmt=i;this.settings=n.extend({},t,n.vegas.defaults,r);this.slide=this.settings.slide;this.total=this.settings.slides.length;this.noshow=this.total<2;this.paused=!this.settings.autoplay||this.noshow;this.$elmt=n(i);this.$timer=null;this.$overlay=null;this.$slide=null;this.timeout=null;this.transitions=["fade","fade2","blur","blur2","flash","flash2","negative","negative2","burn","burn2","slideLeft","slideLeft2","slideRight","slideRight2","slideUp","slideUp2","slideDown","slideDown2","zoomIn","zoomIn2","zoomOut","zoomOut2","swirlLeft","swirlLeft2","swirlRight","swirlRight2"];this.animations=["kenburns","kenburnsLeft","kenburnsRight","kenburnsUp","kenburnsUpLeft","kenburnsUpRight","kenburnsDown","kenburnsDownLeft","kenburnsDownRight"];this.settings.transitionRegister instanceof Array==!1&&(this.settings.transitionRegister=[this.settings.transitionRegister]);this.settings.animationRegister instanceof Array==!1&&(this.settings.animationRegister=[this.settings.animationRegister]);this.transitions=this.transitions.concat(this.settings.transitionRegister);this.animations=this.animations.concat(this.settings.animationRegister);this.support={objectFit:"objectFit"in document.body.style,transition:"transition"in document.body.style||"WebkitTransition"in document.body.style,video:n.vegas.isVideoCompatible()};this.settings.shuffle===!0&&this.shuffle();this._init()};r.prototype={_init:function(){var i,r,u,e=this.elmt.tagName==="BODY",o=this.settings.timer,f=this.settings.overlay,t=this;this._preload();e||(this.$elmt.css("height",this.$elmt.css("height")),i=n('<div class="vegas-wrapper">').css("overflow",this.$elmt.css("overflow")).css("padding",this.$elmt.css("padding")),this.$elmt.css("padding")||i.css("padding-top",this.$elmt.css("padding-top")).css("padding-bottom",this.$elmt.css("padding-bottom")).css("padding-left",this.$elmt.css("padding-left")).css("padding-right",this.$elmt.css("padding-right")),this.$elmt.clone(!0).children().appendTo(i),this.elmt.innerHTML="");o&&this.support.transition&&(u=n('<div class="vegas-timer"><div class="vegas-timer-progress">'),this.$timer=u,this.$elmt.prepend(u));f&&(r=n('<div class="vegas-overlay">'),typeof f=="string"&&r.css("background-image","url("+f+")"),this.$overlay=r,this.$elmt.prepend(r));this.$elmt.addClass("vegas-container");e||this.$elmt.append(i);setTimeout(function(){t.trigger("init");t._goto(t.slide);t.settings.autoplay&&t.trigger("play")},1)},_preload:function(){for(var t,n=0;n<this.settings.slides.length;n++)(this.settings.preload||this.settings.preloadImages)&&this.settings.slides[n].src&&(t=new Image,t.src=this.settings.slides[n].src),(this.settings.preload||this.settings.preloadVideos)&&this.support.video&&this.settings.slides[n].video&&(this.settings.slides[n].video instanceof Array?this._video(this.settings.slides[n].video):this._video(this.settings.slides[n].video.src))},_random:function(n){return n[Math.floor(Math.random()*(n.length-1))]},_slideShow:function(){var n=this;this.total>1&&!this.paused&&!this.noshow&&(this.timeout=setTimeout(function(){n.next()},this._options("delay")))},_timer:function(n){var t=this;(clearTimeout(this.timeout),this.$timer)&&((this.$timer.removeClass("vegas-timer-running").find("div").css("transition-duration","0ms"),this.paused||this.noshow)||n&&setTimeout(function(){t.$timer.addClass("vegas-timer-running").find("div").css("transition-duration",t._options("delay")-100+"ms")},100))},_video:function(n){var t,r,u=n.toString();return i[u]?i[u]:(n instanceof Array==!1&&(n=[n]),t=document.createElement("video"),t.preload=!0,n.forEach(function(n){r=document.createElement("source");r.src=n;t.appendChild(r)}),i[u]=t,t)},_fadeOutSound:function(n,t){var r=this,u=t/10,i=n.volume-.09;i>0?(n.volume=i,setTimeout(function(){r._fadeOutSound(n,t)},u)):n.pause()},_fadeInSound:function(n,t){var r=this,u=t/10,i=n.volume+.09;i<1&&(n.volume=i,setTimeout(function(){r._fadeInSound(n,t)},u))},_options:function(n,t){return(t===undefined&&(t=this.slide),this.settings.slides[t][n]!==undefined)?this.settings.slides[t][n]:this.settings[n]},_goto:function(t){function nt(){l._timer(!0);setTimeout(function(){r&&(l.support.transition?(h.css("transition","all "+o+"ms").addClass("vegas-transition-"+r+"-out"),h.each(function(){var n=h.find("video").get(0);n&&(n.volume=1,l._fadeOutSound(n,o))}),u.css("transition","all "+o+"ms").addClass("vegas-transition-"+r+"-in")):u.fadeIn(o));for(var n=0;n<h.length-4;n++)h.eq(n).remove();l.trigger("walk");l._slideShow()},100)}typeof this.settings.slides[t]=="undefined"&&(t=0);this.slide=t;var u,s,a,h=this.$elmt.children(".vegas-slide"),k=this.settings.slides[t].src,e=this.settings.slides[t].video,p=this._options("delay"),v=this._options("align"),y=this._options("valign"),f=this._options("cover"),d=this._options("color")||this.$elmt.css("background-color"),l=this,g=h.length,i,w,r=this._options("transition"),o=this._options("transitionDuration"),c=this._options("animation"),b=this._options("animationDuration");f!=="repeat"&&(f===!0?f="cover":f===!1&&(f="contain"));(r==="random"||r instanceof Array)&&(r=r instanceof Array?this._random(r):this._random(this.transitions));(c==="random"||c instanceof Array)&&(c=c instanceof Array?this._random(c):this._random(this.animations));(o==="auto"||o>p)&&(o=p);b==="auto"&&(b=p);u=n('<div class="vegas-slide"><\/div>');this.support.transition&&r&&u.addClass("vegas-transition-"+r);this.support.video&&e?(i=e instanceof Array?this._video(e):this._video(e.src),i.loop=e.loop!==undefined?e.loop:!0,i.muted=e.mute!==undefined?e.mute:!0,i.muted===!1?(i.volume=0,this._fadeInSound(i,o)):i.pause(),a=n(i).addClass("vegas-video").css("background-color",d),this.support.objectFit?a.css("object-position",v+" "+y).css("object-fit",f).css("width","100%").css("height","100%"):f==="contain"&&a.css("width","100%").css("height","100%"),u.append(a)):(w=new Image,s=n('<div class="vegas-slide-inner"><\/div>').css("background-image","url("+k+")").css("background-color",d),typeof v=="number"&&typeof y=="number"?s.css("background-position",v+"% "+y+"%"):s.css("background-position",v+" "+y),f==="repeat"?s.css("background-repeat","repeat"):s.css("background-size",f),this.support.transition&&c&&s.addClass("vegas-animation-"+c).css("animation-duration",b+"ms"),u.append(s));this.support.transition||u.css("display","none");g?h.eq(g-1).after(u):this.$elmt.prepend(u);l._timer(!1);i?(i.readyState===4&&(i.currentTime=0),i.play(),nt()):(w.src=k,w.onload=nt)},shuffle:function(){for(var i,t,n=this.total-1;n>0;n--)t=Math.floor(Math.random()*(n+1)),i=this.settings.slides[n],this.settings.slides[n]=this.settings.slides[t],this.settings.slides[t]=i},play:function(){this.paused&&(this.paused=!1,this.next(),this.trigger("play"))},pause:function(){this._timer(!1);this.paused=!0;this.trigger("pause")},toggle:function(){this.paused?this.play():this.pause()},playing:function(){return!this.paused&&!this.noshow},current:function(n){return n?{slide:this.slide,data:this.settings.slides[this.slide]}:this.slide},jump:function(n){n<0||n>this.total-1||n===this.slide||(this.slide=n,this._goto(this.slide))},next:function(){this.slide++;this.slide>=this.total&&(this.slide=0);this._goto(this.slide)},previous:function(){this.slide--;this.slide<0&&(this.slide=this.total-1);this._goto(this.slide)},trigger:function(n){var t=[];t=n==="init"?[this.settings]:[this.slide,this.settings.slides[this.slide]];this.$elmt.trigger("vegas"+n,t);typeof this.settings[n]=="function"&&this.settings[n].apply(this.$elmt,t)},options:function(i,r){var u=this.settings.slides.slice();if(typeof i=="object")this.settings=n.extend({},t,n.vegas.defaults,i);else if(typeof i=="string"){if(r===undefined)return this.settings[i];this.settings[i]=r}else return this.settings;this.settings.slides!==u&&(this.total=this.settings.slides.length,this.noshow=this.total<2,this._preload())},destroy:function(){clearTimeout(this.timeout);this.$elmt.removeClass("vegas-container");this.$elmt.find("> .vegas-slide").remove();this.$elmt.find("> .vegas-wrapper").clone(!0).children().appendTo(this.$elmt);this.$elmt.find("> .vegas-wrapper").remove();this.settings.timer&&this.$timer.remove();this.settings.overlay&&this.$overlay.remove();this.elmt._vegas=null}};n.fn.vegas=function(n){var u=arguments,i=!1,t;if(n===undefined||typeof n=="object")return this.each(function(){this._vegas||(this._vegas=new r(this,n))});if(typeof n=="string"){if(this.each(function(){var r=this._vegas;if(!r)throw new Error("No Vegas applied to this element.");typeof r[n]=="function"&&n[0]!=="_"?t=r[n].apply(r,[].slice.call(u,1)):i=!0}),i)throw new Error('No method "'+n+'" in Vegas.');return t!==undefined?t:this}};n.vegas={};n.vegas.defaults=t;n.vegas.isVideoCompatible=function(){return!/(Android|webOS|Phone|iPad|iPod|BlackBerry|Windows Phone)/i.test(navigator.userAgent)}})(window.jQuery||window.Zepto);